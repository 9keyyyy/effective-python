# 12 스트라이드와 슬라이스를 한 식에 함께 사용하지 말라
## TL;DR

- 스트라이드는 시작값이나 끝값을 증가값과 함께 사용하지 말자. (필요한 경우, 스트라이딩한 다음 슬라이싱하거나 islice 함수 사용)
- 증가값을 사용해야 하는 경우에는 양수 값으로 만들자

### 스트라이드(stride)

파이썬에서는 시퀀스 슬라이싱 외에도 리스트를 **일정한 간격** 을 두고 슬라이싱 할 수 있는 스트라이드 구문을 제공

`list[시작값:끝값:증가값]`의 형태로 정의되며, 각 값으로 음수 값도 사용 가능

- `x[::2]`: x의 시작부터 매 두 번째 원소를 선택
- `x[::-2]`: x의 끝부터 역순으로 매 두 번째 원소를 선택
- `x[2::2]`: `x[2]`부터 매 두 번째 원소를 선택
- `x[-2::-2]`: `x[-2]`부터 역순으로 매 두 번째 원소를 선택
- `x[-2:2:-2]`: `x[-2]`부터 `x[2]`까지 역순으로 매 두 번째 원소를 선택


```python
x = ['빨강', '주황', '노랑', '초록', '파랑', '자주']
odds = x[::2]
evens = x[1::2]
print(odds)
print(evens)

>>>
['빨강', '노랑', '파랑']
['주황', '초록', '자주']
```

### 문자열 스트라이드

일반적으로 문자열 뒤집을 때 -1 스트라이드를 많이 사용하는데, 인코딩 여부에 따라 문제가 발생하기도 함.

```python
# 바이트 문자열
x = b'mongoose'
y = x[::-1]
print(y)

>>>
b'esoognom'

# 유니코드 문자열
x = '寿司' # 스시를 뜻하는 일본어 한자
y = x[::-1]
print(y)

>>>
'司寿'

# UTF-8 인코딩 된 문자열
w = '寿司'
x = w.encode('utf-8')
y = x[::-1]
z = y.encode('utf-8')

>>>
Traceback ...
UnicodeDecodeError: 'utf-8' codec can't decode byte 0xb8 in
position 0: invalid start byte
```

- 인코딩된 것의 바이트 순서를 뒤집으면 인코딩에서 2바이트 이상으로 이뤄졌던 문자들은 코드가 깨지기 때문에 문제가 발생하는 것
- 모든 문자가 아스키 코드 범위에 들어간다면, 1바이트 값으로 인코딩 되기 때문에 아무 문제 없을 수 있음

### 슬라이싱 + 스트라이드

- 시작값과 끝값, 증가값이 모두 포함된 스트라이드는 시작값과 끝값을 기준으로 슬라이싱하고 해당 리스트의 원소를 일정간격으로 뽑아서 리턴
- 하지만 이렇게 구성된 스트라이드는 가독성이 떨어짐 (특히, 증가값이 음수인 경우)

```python
x = [1, 2, 3, 4, 5, 6, 7, 8]
x[2::2]        # [3, 5, 7]
x[-2::-2]     # [7, 5, 3, 1]
x[-2:2:-2]   # [7, 5]
x[2:2:-2]     # []
```

따라서 가능하다면

1) 시작값이나 끝값을 증가값과 함께 사용하지 X
2) 증가값을 사용해야 하는 경우에는 양수값으로
3) 시작값 혹은 끝값을 증가값을 함께 사용해야 하는 경우, 스트라이딩한 결과를 변수에 대입한 다음에 슬라이싱 할 것

```python
x[-2:2:-2]   # [7, 5]

y = x[::2]     # [1, 3, 5, 7]
z = y[::-1]    # [7, 5, 3, 1]
z[:2]             # [7, 5]
```

- 슬라이싱할 때 데이터를 한 번 더 복사(shallow copy)하게 되므로 첫 번째 연산은 가능한 슬라이스 크기를 줄일 수 있어야 함
- 시간/메모리 상 이유로 두 단계 연산을 감당하기 어렵다면 `itertools` 내장 모듈의 `islice` 사용을 고려
  
